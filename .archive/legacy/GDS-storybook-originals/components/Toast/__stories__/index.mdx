import { Meta, Primary, Canvas, ArgTypes } from "@storybook/addon-docs/blocks";
import * as stories from "./index.stories";
import Toast from "..";

<Meta title="Components/Toast" of={stories} />

# Toast

`import { Toast } from '@ticketmaster/global-design-system';`

<Primary />

<ArgTypes of={Toast} />

A toast is a small, temporary notification that appears on the screen to inform the fan of an event or action. Toasts are often used to confirm that an action has been completed successfully or to provide the fan with additional information.

In a Ticketmaster user interface, a toast is typically represented by a small box or pop-up window on the screen for a brief period.
The toast contains a message and a dismiss button and may contain an icon indicating the event or action type. Toasts are a convenient and unobtrusive way to provide information to the fan and can help fans understand the status or outcome of an action.

## Animations

Animations to show and remove the component on screen are not part of the GDS component but are handled in the project where the component is imported.

## Basic

<Canvas of={stories.Basic} />

## Info

<Canvas of={stories.Info} />

## Success

<Canvas of={stories.Success} />

## Warning

<Canvas of={stories.Warning} />

## Error

<Canvas of={stories.Error} />

## Short Message

<Canvas of={stories.ShortMessage} />

## Accessibility

A toast component should deliver a concise message in the form of a consistently positioned popup.
From design, it should always be positioned at the bottom right of the screen.

### ARIA Roles

The component uses the `role` attribute to ensure that screen readers correctly announce the messages as they appear, providing timely feedback to users.
The `role` attribute should be used for content that has changed, or to bring the user's attention to it immediately, so it should not be used for static content or used regularly.
There are three possible roles assignable to the toast component:

- [role="alert"](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/alert_role): used for important, and usually time-sensitive, information. Setting `role="alert"` is equivalent to setting `aria-live="assertive"` and `aria-atomic="true"`.
- [role="status"](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/status_role): used for advisory information, not important enough to be an alert. Setting `role="status"` is equivalent to setting `aria-live="polite"` and `aria-atomic="true"`.
- [role="log"](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/log_role): used where new information is added in a meaningful order and old information may disappear. Setting `role="log"` is equivalent to setting `aria-live="polite"`. Where the user needs to hear the entire live region upon a change, `aria-atomic="true"` should be set.

For more details about choosing the appropriate `role`, check the MDN docs linked in the list.
More guidance on the alert role can be found in [the WAI-ARIA guidelines](https://www.w3.org/TR/wai-aria-1.1/#alert).

If this error message is being used to bring attention to a validation error in a form, ensure that the [Error Identification Guidelines from WCAG are followed](https://www.w3.org/WAI/WCAG21/Understanding/error-identification.html).

Note: a noticeable difference between using `alert` and `status` and `log` is that the screen reader will play a sound similar to a “beep” before announcing the message.

### Timing and Dismissal

One of the significant challenges with toast messages is their timed dismissal.
[WCAG 2.2.1 Timing Adjustable](https://www.w3.org/WAI/WCAG22/Understanding/timing-adjustable.html) requires that users have control over time-sensitive content.

Toasts should be used to indicate the completion of a task or process initiated by the user or the application itself. For instance, a notification verifying the saving of a file, a message had been properly sent, or a meeting was about to start.
If someone ignores or misses a toast message due to its timed display, there should be no negative impact on their current activities or the message’s status.

Ensure the project where you're using the Toast component calls `getGlobalStyles` from GDS to ensure `@media prefers-reduced-motion: reduce` works as expected by removing all animations once the component is imported into the project.

```
import GlobalStyles from '../packages/shared/components/GlobalStyles'
```

### Other Recommendations

Avoid including interactive controls within the toast message, as this can introduce complexity and challenges for users, especially those relying on screen readers.

More details are available in the article [A toast to an accessible toast](https://www.scottohara.me/blog/2019/07/08/a-toast-to-a11y-toasts.html) by Scott Ohara.
