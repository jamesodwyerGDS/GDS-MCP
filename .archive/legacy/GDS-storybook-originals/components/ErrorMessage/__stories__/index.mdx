import {
  Meta,
  Primary,
  Story,
  Canvas,
  ArgTypes,
} from "@storybook/addon-docs/blocks";
import * as stories from "./index.stories";
import ErrorMessage from "..";

<Meta title="Components/ErrorMessage" of={stories} />

# ErrorMessage

`import { ErrorMessage } from '@ticketmaster/global-design-system';`

<Primary />

<ArgTypes of={ErrorMessage} />

## Usage

This component is used for input validation. It is already built into the `InputField.Validation` component and therefore included in most input components by default when the `errorMessage` prop is used.

However, for example, in cases where more than one is needed, it can be added manually:

<Canvas of={stories.MultipleErrors} />

## Accessibility

The `InputField.Validation` component programmatically links its children to the input using `aria-describedby` to make sure any error messages are read out when the related input is focused.

When ErrorMessage is used outside of this component, it is up to the consumer to make sure the parent container has the correct markup:

- For a form input, add `aria-describedby={"id of the validation container"}` to the input (see above example)
- For non-form controls, it might be necessary to also add `aria-live='polite'` and `role='status'` to the container to make sure the error message is read out as soon as the input becomes invalid.
  - For example: A component is used on the event page where changing the input value triggers an API call. As there is no form submission in this case, we need to inform the user of any errors as they toggle the control:
    <Canvas of={stories.LiveError} />

## Form Validation

For guidance on validation patterns, error messages (`screenReaderErrorPrefix`, `errorMessage` ) , accessibility, and recommended ARIA usage when displaying validation errors, see [Form Validation](?path=/docs/patterns-form-validation--docs) under the **Patterns** section.
