import { Meta, Unstyled } from "@storybook/addon-docs/blocks";
import {
  _mobileFontSize_,
  _desktopFontSize_,
  fontSize,
  lineHeight,
} from "../typography";
import { TextStyle } from "../../index";
import { addPx } from "../utils";

<Meta title="Tokens/Typography" />

# Typography

GDS has a set of defined text styles built in at its core. Each text style comprises a font size, line height, letter spacing and some also include a text transform (eg uppercase).

The "base" text style is `rainier` (16px) which should be the default for all body copy, with increases allowed for emphasis, headings etc.

16px is treated as the minimum for legibility/accessibility reasons, but also because some browsers will automatically zoom in if it deems the text to be too small (under 16px) on elements like `<input />`.

On occasion, we may need to go below 16px for "small print" or less important copy. The `etna` and `nevis` (14px) or `snowdon` (12px) styles can be used here.

<Unstyled>
  <div style={{ display: "flex" }}>
    <div style={{ flexGrow: 1, border: "1px solid #eee" }}>
      <div style={{ backgroundColor: "#eee", padding: "20px 32px" }}>
        <TextStyle.Rainier>Mobile</TextStyle.Rainier>
      </div>
      {Object.keys(_mobileFontSize_).map((mobileTextStyle) => {
        const capitalized =
          mobileTextStyle.charAt(0).toUpperCase() + mobileTextStyle.slice(1);
        const TextStyleComponent = TextStyle[capitalized];
        return (
          <div
            key={mobileTextStyle}
            style={{
              padding: "20px 32px",
              display: "flex",
              flexDirection: "row",
              borderTop: "1px solid #eee",
            }}
          >
            <TextStyleComponent
              style={{
                flex: "25%",
                fontSize: `${_mobileFontSize_[mobileTextStyle]}px`,
              }}
            >
              {capitalized}
            </TextStyleComponent>
            <div style={{ flex: "25%", textAlign: "center" }}>
              {addPx(_mobileFontSize_)[mobileTextStyle]}
            </div>
          </div>
        );
      })}
    </div>
    <div
      style={{
        flexGrow: 1,
        borderBottom: "1px solid #eee",
        borderRight: "1px solid #eee",
        borderTop: "1px solid #eee",
      }}
    >
      <div style={{ backgroundColor: "#eee", padding: "20px 32px" }}>
        <TextStyle.Rainier>Desktop</TextStyle.Rainier>
      </div>
      {Object.keys(_desktopFontSize_).map((desktopTextStyle) => {
        const capitalized =
          desktopTextStyle.charAt(0).toUpperCase() +
          desktopTextStyle.slice(1, -7);
        const TextStyleComponent = TextStyle[capitalized];
        return (
          <div
            key={desktopTextStyle}
            style={{
              padding: "20px 32px",
              display: "flex",
              flexDirection: "row",
              borderTop: "1px solid #eee",
            }}
          >
            <TextStyleComponent
              style={{
                flex: "25%",
                fontSize: `${_desktopFontSize_[desktopTextStyle]}px`,
              }}
            >
              {capitalized}
            </TextStyleComponent>
            <div style={{ flex: "25%", textAlign: "center" }}>
              {addPx(_desktopFontSize_)[desktopTextStyle]}
            </div>
          </div>
        );
      })}
    </div>
  </div>
</Unstyled>

<br />

### Set up

Our text styles are responsive, the values for font size and line height change between mobile and desktop.

Because GDS doesn't define "mobile" and "desktop", but instead leaves this up to consumers, we need a way for GDS to set the text style properties for mobile/desktop, but allow consumers to define the point at which they transition.

This is achieved using CSS custom properties. GDS exports `textStyleMobileCustomProperties` and `textStyleDesktopCustomProperties`. Consumers will need to import these, define the properties on an element (usually the root element so that they are global), and set the breakpoint.

Hereâ€™s an example of how the CSS custom properties can be added to the root HTML element in a global styles file:

```css
import { textStyleMobileCustomProperties, textStyleDesktopCustomProperties } from '@ticketmaster/global-design-system'

html {
  ${textStyleMobileCustomProperties};

  @media (min-width: 900px) {
    ${textStyleDesktopCustomProperties};
  }
}
```

### Usage

Once you've completed the set up above, text styles can be imported in two ways.

1. As a CSS snippet which can be added to an existing style definition:

```js
import { textStyle } from '@ticketmaster/global-design-system'

...

<PageHeading>{title}</PageHeading>

...

const PageHeading = styled.h1`
  ${textStyle.everest};
  margin: 0;
`
```

2. As a (`span`) styled component:

```js
import { TextStyle } from "@ticketmaster/global-design-system";

...

<h1>
  <TextStyle.Everest>{title}<TextStyle.Everest>
</h1>
```

Finally, there may be occasions when you need to perform CSS calculations on a font size value. For flexibility, we expose the font size both with the pixel unit and as a unit-less number.

- `--rainier-font-size` -> 16px
- `--rainier-font-size-number` -> 16

```css
const LoadingBlock = styled.div`
  /* replicate the height of the nav to prevent layout shifts */
  height: calc(var(--rainier-font-size) + ${spacing.hall} * 2);
`
```

## Deprecated - Font size

`import { fontSizeDeprecated } from '@ticketmaster/global-design-system';`

GDS has the following font sizes built in its core. The "base" font size is `hecto` (16px) and should be the default font size for all body copy, with increases allowed for emphasis, headings etc.

16px is treated as the minimum for legibility/accessibility reasons, but also because some browsers will automatically zoom in if it deems the text to be too small (under 16px) on elements like `<input />`.

On occasion, we may need to go below 16px for "small print" or less important copy. The `uno` value (14px) can be used here. `centi` (12px) is a candidate for deprecation and shouldn't be used in this writer's (Martyn) opinion, although it's currently used in quite a few places.

<div
  style={{
    padding: "16px 32px",
    backgroundColor: "#fafafa",
    border: "1px solid #eee",
  }}
>
  <table>
    <tbody>
      {Object.keys(fontSize).map((size) => (
        <tr
          key={size}
          style={{
            fontSize: fontSize[size],
            margin: "16px 0",
            lineHeight: lineHeight.default,
          }}
        >
          <th
            style={{
              padding: "0 16px",
              fontWeight: "normal",
              textAlign: "start",
            }}
          >
            <code>fontSize.{size}</code>
          </th>
          <td style={{ padding: "0 16px" }}>
            <strong>{fontSize[size]}</strong>
          </td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

Here's a real representation of the sizes:

<div
  style={{
    padding: "16px 32px",
    backgroundColor: "#fafafa",
    border: "1px solid #eee",
  }}
>
  {Object.keys(fontSize).map((size) => (
    <p
      key={size}
      style={{
        fontSize: fontSize[size],
        margin: "16px 0",
        lineHeight: lineHeight.default,
      }}
    >
      <strong>{size}</strong> The quick brown fox jumped over the lazy dog
    </p>
  ))}
</div>

And as paragraphs:

<div
  style={{
    padding: "16px 32px",
    backgroundColor: "#fafafa",
    border: "1px solid #eee",
  }}
>
  {Object.keys(fontSize).map((size) => (
    <p
      key={size}
      style={{
        fontSize: fontSize[size],
        margin: "16px 0",
        lineHeight: lineHeight.default,
      }}
    >
      <strong>{size}</strong> Lorem ipsum dolor sit amet, consectetur adipiscing
      elit. Nulla ullamcorper tincidunt arcu. Vivamus porta cursus arcu a porta.
      Fusce at enim odio. Nam eget ligula sed enim sagittis pellentesque. Sed eu
      luctus risus, eu porttitor erat. Ut id sollicitudin ipsum. Donec ut nibh
      et erat sagittis gravida. Pellentesque habitant morbi tristique senectus
      et netus et malesuada fames ac turpis egestas. Aliquam vestibulum suscipit
      fringilla. Sed venenatis tortor ac tincidunt scelerisque. Curabitur
      molestie nulla urna. Praesent sit amet mi in velit hendrerit porta non
      quis nibh. Aenean dapibus pulvinar vestibulum. Morbi dolor orci, volutpat
      non ornare bibendum, porttitor eu tellus. Sed fermentum felis ut dui
      facilisis, ac tincidunt enim faucibus. Duis porttitor vulputate lorem, ut
      fermentum urna dictum quis.
    </p>
  ))}
</div>
